<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Common Lisp</title>
<meta name="author" content="Bibek Panthi" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<link rel="stylesheet" type="text/css" href="../css/braindump.css" />
<script src="../js/counters.js" type="text/javascript"></script>
<script src="../js/URI.js" type="text/javascript"></script>
<script src="../js/pages.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="./index.html"> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Common Lisp</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#Related%20Articles">1. Related Articles</a></li>
<li><a href="#Common%20Lisp%20Pathnames">2. Common Lisp Pathnames</a></li>
<li><a href="#Common%20Lisp%20-%20onlisp%20-%20Paul%20Graham">3. Common Lisp - onlisp - Paul Graham</a>
<ul>
<li><a href="#Example%3A%20Bezier%20Curves">3.1. Example: Bezier Curves</a></li>
</ul>
</li>
<li><a href="#The%20Elements%20of%20AI">4. The Elements of AI</a>
<ul>
<li><a href="#Knowledge%20Representation">4.1. Knowledge Representation</a>
<ul>
<li><a href="#Semantic%20Networks">4.1.1. Semantic Networks</a></li>
</ul>
</li>
<li><a href="#Logical%20Reasoning">4.2. Logical Reasoning</a></li>
<li><a href="#Probabilistic%20Reasoning">4.3. Probabilistic Reasoning</a>
<ul>
<li><a href="#Dempster-Shafer%20Calculus">4.3.1. Dempster-Shafer Calculus</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Papers">5. Papers</a>
<ul>
<li><a href="#%5B%5Bfile%3Apapers%2Fcl%2FCLOSminded-%20Slot%20Accessor%20Names%20Matter.pdf%5D%5BCLOSminded%3A%20Slot%20Accessor%20Names%20Matter%5D%5D">5.1. CLOSminded: Slot Accessor Names Matter</a></li>
<li><a href="#ID-2BA7871B-7A0A-4542-947E-8C10BDC95452">5.2. CLOS in Context: The Shape of the Design Space</a></li>
<li><a href="#%5B%5Bfile%3Apapers%2Fcl%2FLisp%2C%20Performance%20Beyond%20Expectations.pdf%5D%5BPerformance%20Beyond%20Expectations%5D%5D">5.3. Performance Beyond Expectations</a></li>
<li><a href="#Using%20Lisp%20Internals%20-%20Unportable%20but%20fun">5.4. Using Lisp Internals - Unportable but fun</a>
<ul>
<li><a href="#sb-cover%20can%20generate%20coverage%20report">5.4.1. sb-cover can generate coverage report</a></li>
<li><a href="#Using%20Custom%20Assembly%20Instructions%20-%20An%20implementation%20of%2032-bit%20bitwise%20rotation%20operators%20for%20SBCL%E2%80%99s%20x86%20architecture%20backend">5.4.2. Using Custom Assembly Instructions - An implementation of 32-bit bitwise rotation operators for SBCL’s x86 architecture backend</a></li>
<li><a href="#Extensible%20CLOS%20method%20specializers">5.4.3. Extensible CLOS method specializers</a></li>
<li><a href="#Generic%20sequences%20protocol%20allows%20easily%20extending%20sequence%20behaviours%20with%20slight%20deviation%20from%20standard%20regarding%20error-signalling">5.4.4. Generic sequences protocol allows easily extending sequence behaviours with slight deviation from standard regarding error-signalling</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Slime%20Tips">6. Slime Tips</a>
<ul>
<li><a href="#M-%3F%20lists%20all%20references%20%26%20C-c%20C-k%20recompiles%20all%20of%20them">6.1. M-? lists all references &amp; C-c C-k recompiles all of them</a></li>
<li><a href="#C-c%20C-d%20~%20Looksup%20format%20directive%20documentation%20in%20hyperspec">6.2. C-c C-d ~ Looksup format directive documentation in hyperspec</a></li>
</ul>
</li>
<li><a href="#Git%20Tips">7. Git Tips</a>
<ul>
<li><a href="#Improve%20Git%20Diffs%20for%20Lisp">7.1. Improve Git Diffs for Lisp</a></li>
</ul>
</li>
<li><a href="#CLOS">8. CLOS</a></li>
</ul>
</div>
</div>
<div id="outline-container-Related%20Articles" class="outline-2">
<h2 id="Related%20Articles"><span class="section-number-2">1.</span> Related Articles</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><a href="mcclim.html#ID-f845d936-6319-4bb1-920f-4cf91c029ad7">McCLIM</a></li>
<li><a href="common_lisp_implementation.html#ID-0493d199-6044-445f-9305-ff6cb63845d6">Common Lisp Implementation</a></li>
<li><a href="SBCL Deftransform.html#ID-900aa3d9-556c-4d59-ab6b-3c4ea2d50c0e">Deftransform - SBCL</a></li>
<li><a href="private/the_bipolar_lisp_programmer.html#ID-AD942B50-73A4-4B88-982D-E796CE019D4F">The Bipolar Lisp Programmer</a> [<a href="https://www.marktarver.com/bipolar.html">https://www.marktarver.com/bipolar.html</a>]</li>
<li><a href="https://awkravchuk.itch.io/cl-fast-ecs/devlog/622054/gamedev-in-lisp-part-1-ecs-and-metalinguistic-abstraction">GameDev in Lisp - ECS System</a></li>
</ul>
</div>
</div>
<div id="outline-container-Common%20Lisp%20Pathnames" class="outline-2">
<h2 id="Common%20Lisp%20Pathnames"><span class="section-number-2">2.</span> Common Lisp Pathnames</h2>
<div class="outline-text-2" id="text-2">
<p>
How We Got Here
</p>

<p>
The historical diversity of file systems in existence during the 70s and 80s can be easy to forget. Kent Pitman, one of the principal technical editors of the Common Lisp standard, described the situation once in comp.lang.lisp (Message-ID: sfwzo74np6w.fsf@world.std.com) thusly:
</p>

<blockquote>
<p>
The dominant file systems at the time the design [of Common Lisp] was done were TOPS-10, TENEX, TOPS-20, VAX VMS, AT&amp;T Unix, MIT Multics, MIT ITS, not to mention a bunch of mainframe [OSs]. Some were uppercase only, some mixed, some were case-sensitive but case-translating (like CL). Some had dirs as files, some not. Some had quote chars for funny file chars, some not. Some had wildcards, some didn’t. Some had :up in relative pathnames, some didn’t. Some had namable root dirs, some didn’t. There were file systems with no directories, file systems with non-hierarchical directories, file systems with no file types, file systems with no versions, file systems with no devices, and so on.
</p>
</blockquote>

<p>
If you look at the pathname abstraction from the point of view of any single file system, it seems baroque.  However, if you take even two such similar file systems as Windows and Unix, you can already begin to see differences the pathname system can help abstract away&#x2013;Windows filenames contain a drive letter, for instance, while Unix filenames don’t. The other advantage of having the pathname abstraction designed to handle the wide variety of file systems that existed in the past is that it’s more likely to be able to handle file systems that may exist in the future. If, say, versioning file systems come back into vogue, Common Lisp will be ready.
</p>
</div>
</div>
<div id="outline-container-Common%20Lisp%20-%20onlisp%20-%20Paul%20Graham" class="outline-2">
<h2 id="Common%20Lisp%20-%20onlisp%20-%20Paul%20Graham"><span class="section-number-2">3.</span> Common Lisp - onlisp - Paul Graham</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-Example%3A%20Bezier%20Curves" class="outline-3">
<h3 id="Example%3A%20Bezier%20Curves"><span class="section-number-3">3.1.</span> Example: Bezier Curves</h3>
<div class="outline-text-3" id="text-3-1">
<p>
<a href="20201113083028-bezier_curves.html">Bezier Curves</a>
</p>
</div>
</div>
</div>
<div id="outline-container-The%20Elements%20of%20AI" class="outline-2">
<h2 id="The%20Elements%20of%20AI"><span class="section-number-2">4.</span> The Elements of AI</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-Knowledge%20Representation" class="outline-3">
<h3 id="Knowledge%20Representation"><span class="section-number-3">4.1.</span> Knowledge Representation</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-Semantic%20Networks" class="outline-4">
<h4 id="Semantic%20Networks"><span class="section-number-4">4.1.1.</span> Semantic Networks</h4>
<div class="outline-text-4" id="text-4-1-1">
</div>
</div>
</div>
<div id="outline-container-Logical%20Reasoning" class="outline-3">
<h3 id="Logical%20Reasoning"><span class="section-number-3">4.2.</span> Logical Reasoning</h3>
<div class="outline-text-3" id="text-4-2">
</div>
</div>
<div id="outline-container-Probabilistic%20Reasoning" class="outline-3">
<h3 id="Probabilistic%20Reasoning"><span class="section-number-3">4.3.</span> Probabilistic Reasoning</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-Dempster-Shafer%20Calculus" class="outline-4">
<h4 id="Dempster-Shafer%20Calculus"><span class="section-number-4">4.3.1.</span> Dempster-Shafer Calculus</h4>
<div class="outline-text-4" id="text-4-3-1">
</div>
</div>
</div>
</div>
<div id="outline-container-Papers" class="outline-2">
<h2 id="Papers"><span class="section-number-2">5.</span> Papers</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-%5B%5Bfile%3Apapers%2Fcl%2FCLOSminded-%20Slot%20Accessor%20Names%20Matter.pdf%5D%5BCLOSminded%3A%20Slot%20Accessor%20Names%20Matter%5D%5D" class="outline-3">
<h3 id="%5B%5Bfile%3Apapers%2Fcl%2FCLOSminded-%20Slot%20Accessor%20Names%20Matter.pdf%5D%5BCLOSminded%3A%20Slot%20Accessor%20Names%20Matter%5D%5D"><span class="section-number-3">5.1.</span> <a href="papers/cl/CLOSminded- Slot Accessor Names Matter.pdf">CLOSminded: Slot Accessor Names Matter</a></h3>
<div class="outline-text-3" id="text-5-1">
<p>
by Tim Moore
</p>

<p>
In CLOS we should think in terms of generic functions instead of the C++ style of communication between objects.
</p>

<p>
Don’t prepend class name in accessor names.
</p>

<p>
When defining protocol class, its is common practice to define a standard subclass of it, especially if it the protocol is implementable in terms of slots.
</p>
</div>
</div>
<div id="outline-container-ID-2BA7871B-7A0A-4542-947E-8C10BDC95452" class="outline-3">
<h3 id="ID-2BA7871B-7A0A-4542-947E-8C10BDC95452"><span class="section-number-3">5.2.</span> <a href="papers/cl/CLOS in Context, The Shape of the Design Space.pdf">CLOS in Context: The Shape of the Design Space</a></h3>
<div class="outline-text-3" id="text-5-2">
<p>
by
</p>
<ul class="org-ul">
<li>Daniel G. Bobrow</li>
<li>Richard P. Gabriel</li>
<li>Jon L. White</li>
</ul>

<p>
Shows the space of <a href="object_oriented_programming.html#ID-854CA491-4BB0-4B22-8E9D-311AE799768F">OOP</a> system's design, and the aspects of CL.
</p>

<ul class="org-ul">
<li>Object-Based Programming Tradition</li>
<li>Data-Driven Dispatch</li>
<li>Pattern-directed Invocation</li>
<li>Polymorphism Tradition</li>
</ul>



<div id="figure-1" class="figure">
<p><img src="data/Common Lisp/styles_of_oop-20230101175201.png" alt="styles_of_oop-20230101175201.png" />
</p>
<p><span class="figure-number">Figure 1: </span>Styles of OOP</p>
</div>
</div>
</div>
<div id="outline-container-%5B%5Bfile%3Apapers%2Fcl%2FLisp%2C%20Performance%20Beyond%20Expectations.pdf%5D%5BPerformance%20Beyond%20Expectations%5D%5D" class="outline-3">
<h3 id="%5B%5Bfile%3Apapers%2Fcl%2FLisp%2C%20Performance%20Beyond%20Expectations.pdf%5D%5BPerformance%20Beyond%20Expectations%5D%5D"><span class="section-number-3">5.3.</span> <a href="papers/cl/Lisp, Performance Beyond Expectations.pdf">Performance Beyond Expectations</a></h3>
<div class="outline-text-3" id="text-5-3">
<p>
This paper illustrates a neat technique to make slot access faster. Instead of using accessor function it uses closure.
</p>


<p>
"We replace calls to the IREF* generic function with calls to the IREF-FN of the image instance."
</p>

<details open><summary><span class='org-details-collapse'>&lt; Collapse code block</span><span class='org-details-expand'>&gt; Expand code block</span></summary>
<div class="org-src-container">
<pre class="src src-common-lisp">(<span class="org-keyword">defmethod</span> <span class="org-function-name">initialize-instance</span> <span class="org-builtin">:after</span> ((image array-image-unsigned-byte-8))
  (<span class="org-keyword">with-slots</span> (iref-fn xmap ymap pixels)
      (<span class="org-keyword">let</span> ((xmap xmap) (ymap ymap) (pixels pixels))
        <span class="org-comment-delimiter">;; </span><span class="org-comment">*****  This is the lexical scope of the IREF-FN  ***********</span>
        (<span class="org-keyword">flet</span> ((iref-fn (x y)
                 (<span class="org-keyword">declare</span> (type fixnum x y))
                 (aref (<span class="org-keyword">the</span> (simple-array (unsigned-byte 8) (*)) pixels)
                       (fix+ (aref (<span class="org-keyword">the</span> image-map xmap) x) (aref (<span class="org-keyword">the</span> image-map ymap) y)))))
          (setf iref-fn #&#8217;iref-fn)))))

(<span class="org-keyword">defmacro</span> <span class="org-function-name">iref</span> (image x y)
  &#8216;(funcall (<span class="org-keyword">the</span> function (image-iref-fn ,image) ,x ,y)))

(<span class="org-keyword">defun</span> <span class="org-function-name">iref-image-add0</span> (a b c)
  (<span class="org-keyword">loop</span> with xdim fixnum = (image-xdim a)
        with ydim fixnum = (image-ydim a)
        for y fixnum from 0 below ydim
        do (<span class="org-keyword">loop</span> for x fixnum from 0 below xdim
                 do (setf (iref c x y) (fix+ (iref a x y) (iref b x y)))))
  c)
</pre>
</div></details>
</div>
</div>
<div id="outline-container-Using%20Lisp%20Internals%20-%20Unportable%20but%20fun" class="outline-3">
<h3 id="Using%20Lisp%20Internals%20-%20Unportable%20but%20fun"><span class="section-number-3">5.4.</span> Using Lisp Internals - Unportable but fun</h3>
<div class="outline-text-3" id="text-5-4">
</div>
<div id="outline-container-sb-cover%20can%20generate%20coverage%20report" class="outline-4">
<h4 id="sb-cover%20can%20generate%20coverage%20report"><span class="section-number-4">5.4.1.</span> sb-cover can generate coverage report</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
For example to generate coverage report for cl-ppcre system do:
</p>
<details open><summary><span class='org-details-collapse'>&lt; Collapse code block</span><span class='org-details-expand'>&gt; Expand code block</span></summary>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">require</span> <span class="org-constant">:sb-cover</span>)
(<span class="org-keyword">declaim</span> (optimize sb-cover:store-coverage-data))
(asdf:oos &#8217;asdf:load-op <span class="org-builtin">:cl-ppcre-test</span>)
(cl-ppcre-test:run-all-tests)
(sb-cover:report <span class="org-string">"/tmp/cl-ppcre/"</span>)
</pre>
</div></details>
</div>
</div>
<div id="outline-container-Using%20Custom%20Assembly%20Instructions%20-%20An%20implementation%20of%2032-bit%20bitwise%20rotation%20operators%20for%20SBCL%E2%80%99s%20x86%20architecture%20backend" class="outline-4">
<h4 id="Using%20Custom%20Assembly%20Instructions%20-%20An%20implementation%20of%2032-bit%20bitwise%20rotation%20operators%20for%20SBCL%E2%80%99s%20x86%20architecture%20backend"><span class="section-number-4">5.4.2.</span> Using Custom Assembly Instructions - An implementation of 32-bit bitwise rotation operators for SBCL’s x86 architecture backend</h4>
<div class="outline-text-4" id="text-5-4-2">
</div>
</div>
<div id="outline-container-Extensible%20CLOS%20method%20specializers" class="outline-4">
<h4 id="Extensible%20CLOS%20method%20specializers"><span class="section-number-4">5.4.3.</span> Extensible CLOS method specializers</h4>
<div class="outline-text-4" id="text-5-4-3">
</div>
</div>
<div id="outline-container-Generic%20sequences%20protocol%20allows%20easily%20extending%20sequence%20behaviours%20with%20slight%20deviation%20from%20standard%20regarding%20error-signalling" class="outline-4">
<h4 id="Generic%20sequences%20protocol%20allows%20easily%20extending%20sequence%20behaviours%20with%20slight%20deviation%20from%20standard%20regarding%20error-signalling"><span class="section-number-4">5.4.4.</span> Generic sequences protocol allows easily extending sequence behaviours with slight deviation from standard regarding error-signalling</h4>
<div class="outline-text-4" id="text-5-4-4">
</div>
</div>
</div>
</div>
<div id="outline-container-Slime%20Tips" class="outline-2">
<h2 id="Slime%20Tips"><span class="section-number-2">6.</span> Slime Tips</h2>
<div class="outline-text-2" id="text-6">
<p>
<a href="https://slime-tips.tumblr.com/">https://slime-tips.tumblr.com/</a>
</p>
</div>
<div id="outline-container-M-%3F%20lists%20all%20references%20%26%20C-c%20C-k%20recompiles%20all%20of%20them" class="outline-3">
<h3 id="M-%3F%20lists%20all%20references%20%26%20C-c%20C-k%20recompiles%20all%20of%20them"><span class="section-number-3">6.1.</span> M-? lists all references &amp; C-c C-k recompiles all of them</h3>
<div class="outline-text-3" id="text-6-1">
<p>
<a href="https://slime-tips.tumblr.com/post/11174492567/cross-referencing">https://slime-tips.tumblr.com/post/11174492567/cross-referencing</a>
</p>
</div>
</div>
<div id="outline-container-C-c%20C-d%20~%20Looksup%20format%20directive%20documentation%20in%20hyperspec" class="outline-3">
<h3 id="C-c%20C-d%20~%20Looksup%20format%20directive%20documentation%20in%20hyperspec"><span class="section-number-3">6.2.</span> C-c C-d ~ Looksup format directive documentation in hyperspec</h3>
<div class="outline-text-3" id="text-6-2">
<p>
<a href="https://slime-tips.tumblr.com/post/11015048115/documentation-look-up">https://slime-tips.tumblr.com/post/11015048115/documentation-look-up</a>
</p>
</div>
</div>
</div>
<div id="outline-container-Git%20Tips" class="outline-2">
<h2 id="Git%20Tips"><span class="section-number-2">7.</span> Git Tips</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-Improve%20Git%20Diffs%20for%20Lisp" class="outline-3">
<h3 id="Improve%20Git%20Diffs%20for%20Lisp"><span class="section-number-3">7.1.</span> Improve Git Diffs for Lisp</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<a href="https://www.n16f.net/blog/improving-git-diffs-for-lisp/">https://www.n16f.net/blog/improving-git-diffs-for-lisp/</a>
</p>

<p>
Edit your Git attribute file at <code>$HOME/.gitattributes</code> and add entries for both Emacs Lisp and Common Lisp:
</p>

<details open><summary><span class='org-details-collapse'>&lt; Collapse code block</span><span class='org-details-expand'>&gt; Expand code block</span></summary>
<div class="org-src-container">
<pre class="src src-text">*.lisp diff=common-lisp
*.el diff=elisp
</pre>
</div></details>

<p>
Then edit your Git configuration file at <code>$HOME/.gitconfig</code> and configure the path of the Git attribute file:
</p>

<details open><summary><span class='org-details-collapse'>&lt; Collapse code block</span><span class='org-details-expand'>&gt; Expand code block</span></summary>
<div class="org-src-container">
<pre class="src src-text">[core]
    attributesfile = ~/.gitattributes
</pre>
</div></details>

<p>
Finally, set the regular expression used to match a top-level function name:
</p>

<details open><summary><span class='org-details-collapse'>&lt; Collapse code block</span><span class='org-details-expand'>&gt; Expand code block</span></summary>
<div class="org-src-container">
<pre class="src src-text">[diff "common-lisp"]
    xfuncname="^\\((def\\S+\\s+\\S+)"

[diff "elisp"]
    xfuncname="^\\((((def\\S+)|use-package)\\s+\\S+)"
</pre>
</div></details>
</div>
</div>
</div>
<div id="outline-container-CLOS" class="outline-2">
<h2 id="CLOS"><span class="section-number-2">8.</span> CLOS</h2>
<div class="outline-text-2" id="text-8">
<hr />
<h3>Backlinks</h3>

<ul class="org-ul">
<li><a href="worse_is_better.html#ID-BDDCDDA3-2273-4D1A-B906-6ED7C546417A">Worse is Better</a></li>
<li><a href="floating_point_numbers.html#ID-CDF0E75F-B48F-4639-9EA1-252FD93B7662">Floating Point Numbers</a></li>
<li><a href="SBCL Deftransform.html#ID-900aa3d9-556c-4d59-ab6b-3c4ea2d50c0e">Deftransform - SBCL</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/>You can send your feedback, queries <a href="mailto:bpanthi977@gmail.com?subject=Feedback: Common Lisp">here</a><span id="visits"></span><span id="claps"></span><div id="claps-message"></div><a href="https://bpanthi977.github.io/braindump/data/rss.xml"><img src="https://bpanthi977.github.io/braindump/data/rss.png" /></a>
</div>
</body>
</html>
